<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PwGen - Password Manager</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Login/Init Screen -->
        <div id="login-screen" class="screen active">
            <div class="logo">
                <h1>PwGen</h1>
                <p>Secure Password Manager</p>
            </div>
            <div class="login-form">
                <input type="password" id="master-password" placeholder="Master Password" autofocus>
                <div class="button-group">
                    <button id="unlock-btn" class="primary">Unlock Vault</button>
                    <button id="init-btn" class="secondary">Initialize New Vault</button>
                </div>
                <div id="login-error" class="error-message"></div>
            </div>
        </div>

        <!-- Main Screen -->
        <div id="main-screen" class="screen">
            <header>
                <div class="header-left">
                    <h2>PwGen</h2>
                    <input type="text" id="search-input" placeholder="Search passwords...">
                </div>
                <div class="header-right">
                    <button id="add-entry-btn" class="icon-btn" title="Add Entry">+</button>
                    <button id="generate-password-btn" class="icon-btn" title="Generate Password">‚ö°</button>
                    <button id="lock-btn" class="icon-btn" title="Lock Vault">üîí</button>
                </div>
            </header>

            <div class="content">
                <aside class="sidebar">
                    <div class="view-switcher">
                        <button class="view-btn active" data-view="passwords">üîê Passwords</button>
                        <button class="view-btn" data-view="secrets">üîß Secrets</button>
                    </div>
                    <nav>
                        <a href="#" class="nav-item active" data-filter="all">All Items</a>
                        <a href="#" class="nav-item" data-filter="favorites">Favorites</a>
                        <a href="#" class="nav-item" data-filter="recent">Recently Used</a>
                    </nav>
                    <div class="secret-types" id="secret-types-section" style="display: none;">
                        <h3>Secret Types</h3>
                        <div id="secret-types-list"></div>
                    </div>
                    <div class="tags-section">
                        <h3>Tags</h3>
                        <div id="tags-list"></div>
                    </div>
                </aside>

                <main class="password-list">
                    <div id="entries-container"></div>
                </main>

                <div id="entry-details" class="entry-details">
                    <div class="detail-header">
                        <h3 id="detail-site">Select an entry</h3>
                        <button id="close-details" class="icon-btn">√ó</button>
                    </div>
                    <div id="detail-content"></div>
                </div>
            </div>
        </div>

        <!-- Add/Edit Entry Modal -->
        <div id="entry-modal" class="modal">
            <div class="modal-content">
                <h3 id="modal-title">Add New Entry</h3>
                <form id="entry-form">
                    <input type="text" id="entry-site" placeholder="Website" required>
                    <input type="text" id="entry-username" placeholder="Username" required>
                    <div class="password-input-group">
                        <input type="password" id="entry-password" placeholder="Password" required>
                        <button type="button" id="toggle-password-visibility" class="icon-btn">üëÅÔ∏è</button>
                        <button type="button" id="generate-for-entry" class="icon-btn">‚ö°</button>
                    </div>
                    <textarea id="entry-notes" placeholder="Notes (optional)" rows="3"></textarea>
                    <input type="text" id="entry-tags" placeholder="Tags (comma separated)">
                    <div class="modal-buttons">
                        <button type="submit" class="primary">Save</button>
                        <button type="button" id="cancel-entry" class="secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Password Generator Modal -->
        <div id="generator-modal" class="modal">
            <div class="modal-content">
                <h3>Password Generator</h3>
                <div class="generator-output">
                    <input type="text" id="generated-password" readonly>
                    <button id="copy-generated" class="icon-btn" title="Copy">üìã</button>
                    <button id="regenerate" class="icon-btn" title="Regenerate">üîÑ</button>
                </div>
                <div class="generator-options">
                    <label>
                        Length: <span id="length-value">16</span>
                        <input type="range" id="password-length" min="8" max="128" value="16">
                    </label>
                    <label>
                        <input type="checkbox" id="include-uppercase" checked> Uppercase (A-Z)
                    </label>
                    <label>
                        <input type="checkbox" id="include-lowercase" checked> Lowercase (a-z)
                    </label>
                    <label>
                        <input type="checkbox" id="include-numbers" checked> Numbers (0-9)
                    </label>
                    <label>
                        <input type="checkbox" id="include-symbols" checked> Symbols (!@#$...)
                    </label>
                    <label>
                        <input type="checkbox" id="exclude-ambiguous" checked> Exclude ambiguous (0O1lI)
                    </label>
                </div>
                <div class="modal-buttons">
                    <button id="use-generated" class="primary">Use This Password</button>
                    <button id="close-generator" class="secondary">Close</button>
                </div>
            </div>
        </div>

        <!-- Add Secret Modal -->
        <div id="secret-modal" class="modal">
            <div class="modal-content">
                <h3>Add New Secret</h3>
                <form id="secret-form">
                    <select id="secret-type" required>
                        <option value="">Select secret type...</option>
                        <option value="password">Password</option>
                        <option value="secure-note">Secure Note</option>
                    </select>
                    <input type="text" id="secret-name" placeholder="Name" required>
                    <textarea id="secret-description" placeholder="Description (optional)" rows="2"></textarea>
                    
                    <!-- Dynamic fields based on secret type -->
                    <div id="secret-fields"></div>
                    
                    <input type="text" id="secret-tags" placeholder="Tags (comma separated)">
                    <div class="modal-buttons">
                        <button type="submit" class="primary">Save Secret</button>
                        <button type="button" id="cancel-secret" class="secondary">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="app-working.js" defer></script>
</body>
</html>